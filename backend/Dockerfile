FROM node:20-alpine

ENV DATABASE_HOST=mongo-db
ENV DATABASE_NAME=HTMLGenerator
ENV CLIENT_EMAIL="htmlgenerator@html-generator-422807.iam.gserviceaccount.com"
ENV PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQC8WcKBYXPlMGdA\n6RkssRnP+UUy+RDJsX+D5LpyvSPmrSHcXB/OkSPVRw1em4U/C7lLYnTgTMZM6itt\nQ3Qnp268JpGPbZGZjxFEmWkTbtfndkt+tt+kpm2ijgD/TTbpBFrvxm85j6MrHf1f\ndKg/E63Vv0InA7y3q2l3uNtOtJd6PSC/9x1jADinYDqSpCDtA1NddK94MynuTQjt\ndLRAsM6Z3Z6GuUxQreSFmWzTRsHCiEHtqUyinFh5qytyA+qK/35kt/pg1zQfUFrj\nV6iuzZiANppwSiAmtn9OY58HLOYs02aRGMlg8CBDgPy3QKCECc71UL6QMaWhpUR4\n4YB1jdz5AgMBAAECggEAWTjX57wHT4lXUCtbjo0yYg991UCg0Dpx4kPGgrXQPOTE\nxoMpWgvtAooO7kMToqLmGqzAGsSjpynCepbafjJVRXGrwFqx/yEDmBBn8xmt0up5\npsPwOynPg5JrLIUiPs2eWjkQ1R6St8kUDlTPolmrHjbkmmCt0/+yDVGXKbhojTF5\nbiW2QY1Q91VpJWlUi7zCHJDU9io3Q76hqLhqIJj2JpWPtlZTTZyqZOiG5oVHtaF0\nYO44C5x6l/H5gg8W/9jj2O51u7TOragFyWOemo84j5HqZbzvD8N/8E1rcc9NBPj4\nSZ7SqzN9m/ymhXloETgSRaVvTxllN5FcfDo1nzL+NQKBgQDniy+j0I6E7my+qrS+\nxFW0WNmeRxWYyrKOGd33k+Im0jsiCtxSTlmuS3qln7/Evp1GR1Esns39cAQBnFRV\nMv4W4ta+lZT/5aeaWL0OuFzKyG93adQIE81qfUOHLMs4g51FKKSbyRFFWPlyadBr\ndxZhmc0XVS9mryOfPSTJy6gXYwKBgQDQPqgnJFRPBif7oZeL4BXYRJiMOT6jdDfW\nMLpUEr6m3ClfmT5kA15DhfOzvXdq9hJEb1Rhq/KnOmYyayqIO6XofoVoZ2svFYb7\nD4C7xSnWMlPQwb5uMLlF3cWcYeRICseByrBKLIvZ/RbaaYql4o57kV0aZjiCxY95\nRMCuX3rO8wKBgQCva/An+DZB2DFjMwnFDhKwlDArjkd6fvdQWaClldDdAKH0ZK4P\nXXTsbBr7qFAtywx01ktVturxfBBM+BechQmkZS+1LLa6OVAFy/1QTbVfnQN2QSN3\nCymx6D1lCDbfFjfs0aIEtQz0sTgryqcxBARc5Z1QdCV5cm9WkYhxqm4raQKBgHxq\nYuZ30xMfl3XEVpmQORzr5sQoU18uyUlj9X7TcCqa8PEXymnQhVoMRszFTvqNp95R\nMXXlWGVHA9XtpwybroTYSnZVC3mm/+0xlvUYV+WMTf00M8T7wUWXuT+0UMImBopq\nAadfM/L6PdQiKF7xm7UB5UEnf23KAO0wAXpsux+3AoGBANQkf+m650LSk9hZv17J\nq/ogVHz47Dg6GaV9tUCOndiyNenyyoJH0TpclDeVWktFQG0EKfzb9hkBDJCcNhOM\n+3rqsdYc45lMHbo/H5bo5sGbQm9/DcsY8ZIIioI5B6mDlZgYfLS/gM41wffVjvGL\nHFEhJOBItTtzT7nh0aZ0/uua\n-----END PRIVATE KEY-----"

WORKDIR /app

COPY package.json .

RUN apk add chromium

RUN npm install

COPY . .

EXPOSE 9100

# CMD ["npm", "run", "dev"]
CMD ["npm", "start"]